## Docker MLflow Server
This folder contains the configuration for an MLflow server based on Docker compose.
The docker-compose creates six containers: one mlflow server, one minio database, one MySQL database and two ngrok tunnels for access via Google Colab.

### Instructions
#### Setup
1. Download Docker Desktop for your operating system. The instructions for your operating system can be found [here](https://www.docker.com/products/docker-desktop/).
2. Create two ngrok accounts [here](https://ngrok.com) and enter the auth tokens of both accounts in the .env file as `NGROK_AUTHTOKEN` and `NGROK_AUTHTOKEN2`. The setup of this docker-compose uses two accounts, as one free account allows only for one tunnel at a time. If a premium account is used, the configuration might need to be changed.
3. Open the terminal within this folder and use the command: `docker-compose up`. This will create all containers required.

#### local access
This server can be accessed from the local machine via the URL: http://127.0.0.1:5501. This will show the mlflow dashboard.
The Min.io dashboard can be accessed via the address: http://127.0.0.1:9001
#### remote access
For remote access, the server uses ngrok with basic HTTP authentication. After starting the docker server, visit http://127.0.0.1:4040 to retrieve the current HTTPS address for the MLflow server URL and visit https://127.0.0.1:4041 for the Min.io (S3 Bucket) server URL. These addresses have to be specified in the `Params for MLflow` section of the python notebooks. The variable names used in the notebooks are `MLFLOW_TRACKING_URI` and
`MLFLOW_S3_ENDPOINT_URL`, respectively. 

### Sources
1. The code for the local MLfow docker setup has been taken from [Sachua](https://github.com/sachua/mlflow-docker-compose).
2. The idea for the ngrok integration has been taken from [Lucas Jellema](https://medium.com/oracledevs/expose-docker-container-services-on-the-internet-using-the-ngrok-docker-image-3f1ea0f9c47a)

